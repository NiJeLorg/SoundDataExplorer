<div class="modalDataWrapper">
	<div class="legendModal pull-right">
        <svg xmlns="http://www.w3.org/2000/svg" width="438.925" height="178.996"><defs><clipPath id="a"><path d="M0 841.7h1191V0H0v841.7z"/></clipPath><clipPath id="b"><path d="M0 841.7h1191V0H0v841.7z"/></clipPath><clipPath id="c"><path d="M0 841.7h1191V0H0v841.7z"/></clipPath><clipPath id="d"><path d="M0 841.7h1191V0H0v841.7z"/></clipPath><clipPath id="e"><path d="M0 841.8h1190.6V0H0v841.8z"/></clipPath></defs><text x="199.845" y="99.847" font-size="20.5"><tspan x="199.84547 207.97047" y="99.847" style="-inkscape-font-specification:PrintClearly" font-size="14.625" font-weight="bold" fill="#6d6e71" font-family="Print Clearly">A</tspan> <tspan x="199.845" y="118.597" style="-inkscape-font-specification:PrintClearly" font-size="14.625" font-weight="bold" fill="#6d6e71" font-family="Print Clearly">B</tspan> <tspan x="199.345" y="137.472" style="-inkscape-font-specification:PrintClearly" font-size="14.625" font-weight="bold" fill="#6d6e71" font-family="Print Clearly">C</tspan> <tspan x="199.345" y="153.097" style="-inkscape-font-specification:PrintClearly" font-size="14.625" font-weight="bold" fill="#6d6e71" font-family="Print Clearly">D</tspan> <tspan x="199.84547 206.22044" y="167.722" style="-inkscape-font-specification:PrintClearly" font-size="14.625" font-weight="bold" fill="#6d6e71" font-family="Print Clearly">F</tspan></text><g clip-path="url(#a)" transform="matrix(1.707 0 0 -1.707 -1604.98 786.859)"><path stroke-miterlimit="10" d="M1067.3 451.4v-94.8" fill="none" stroke="#6d6e71"/></g><g clip-path="url(#b)" transform="matrix(1.707 0 0 -1.707 -1604.98 786.859)"><path stroke-miterlimit="10" d="M979.5 412.4H1156m-186-55.8h198" fill="none" stroke="#6d6e71"/><path d="M1091 401.6c-1.8-.7-4 .3-4.6 2.2-.7 2 .3 4 2.2 4.7 2 .7 4-.3 4.7-2.2.7-2-.3-4-2.2-4.7" fill="#009444"/><path d="M1091 361.8c-1.8-.7-4 .3-4.6 2.2-.7 2 .3 4 2.2 4.7 2 .6 4-.4 4.7-2.3.7-2-.3-4-2.2-4.6" fill="#be1e2d"/></g><text x="221.095" y="98.972" font-size="20.5"><tspan x="221.09547 226.22052 232.9704 238.84549 244.72043" y="98.972" style="-inkscape-font-specification:PrintClearly" font-size="14.625" font-weight="bold" fill="#6d6e71" font-family="Print Clearly">Pass</tspan> <tspan x="228.22049 232.84543 239.59546 242.3454 244.72043" y="167.722" style="-inkscape-font-specification:PrintClearly" font-size="14.625" font-weight="bold" fill="#6d6e71" font-family="Print Clearly">Fail</tspan></text><g clip-path="url(#c)" transform="matrix(1.707 0 0 -1.707 -1604.98 788.859)"><path d="M988.8 372.6c0-6.4-5.2-11.6-11.6-11.6-6.4 0-11.6 5.2-11.6 11.6 0 6.5 5.2 11.7 11.6 11.7 6.4 0 11.6-5.2 11.6-11.7" fill="#f9ae08"/></g><text x="53.62" y="163.922" font-size="20.5"><tspan x="53.62" y="163.922" style="-inkscape-font-specification:PrintClearly" font-size="35.6" font-weight="bold" fill="#fff" font-family="Print Clearly">C</tspan></text><path d="M377.005 151.7v-19.5c-10.7 0-19.4 8.7-19.4 19.5s8.7 19.5 19.4 19.5c10.8 0 19.5-8.7 19.5-19.5h-19.5z" fill="#009444"/><path d="M396.605 151.7c0-10.8-8.8-19.5-19.5-19.5v19.5h19z" fill="#be1e2d"/><path d="M392.905 151.7c0 8.7-7 15.8-15.8 15.8-9 0-16-7-16-15.8 0-8.7 7-15.8 16-15.8 8 0 15 7 15 15.8" fill="#fff"/><path d="M340.005 46.2c6.5 6.5 17 6.5 23.5 0s6.5-17 0-23.5l-11.7-11.8-11.8 12c-6.5 6.5-6.5 17 0 23.5" fill="#c1e6e7"/><path stroke-miterlimit="10" d="M340.005 46.2c6.5 6.5 17 6.5 23.5 0s6.5-17 0-23.5l-11.7-11.8-11.8 12c-6.5 6.5-6.5 17 0 23.5z" fill="none" stroke="#098ca8" stroke-width="3.4"/><text x="339.763" y="39.027" font-size="20.5"><tspan x="339.76349 346.16351 352.26349" y="39.027" style="-inkscape-font-specification:PrintClearly" font-size="18" font-weight="bold" fill="#098ca8" font-family="Print Clearly">85%</tspan></text><path d="M92.605 31.2c0 8.8-7 16-16 16-8.7 0-15.8-7.2-15.8-16s7-16 16-16c8.7 0 15.8 7.2 15.8 16" fill="#ef4136"/><path stroke-miterlimit="10" d="M92.605 31.2c0 8.8-7 16-16 16-8.7 0-15.8-7.2-15.8-16s7-16 16-16c8.7 0 15.8 7.2 15.8 16z" fill="none" stroke="#f7941e" stroke-width="3.4"/><path stroke-miterlimit="10" d="M98.705 31.2h7.4m-14-15.6l5-5.2m-21-1.2V1.7m-15.7 14l-5.4-5.3m5.3 36.3l-4.1 4.2m19.8 2v7.4m15.5-13.6l5.2 5.3" fill="none" stroke="#fbb040" stroke-width="3.4" stroke-linecap="round"/><text x="65.191" y="36.508" font-size="20.5"><tspan x="65.191483 71.191483 77.191483" y="36.508" style="-inkscape-font-specification:PrintClearly" font-size="18" font-weight="bold" fill="#fff" font-family="Print Clearly">27%</tspan></text><g clip-path="url(#d)" transform="matrix(1.707 0 0 -1.707 -1641.409 784.145)"><path stroke-miterlimit="10" d="M988.5 441h4.4" fill="none" stroke="#fbb040" stroke-width="2" stroke-linecap="round"/></g><g transform="matrix(1.668 0 0 -1.668 -1563.148 782.435)" clip-path="url(#e)"><path d="M1053 408.2c-2-.7-4 .3-4.7 2.2-.7 2 .3 4 2.2 4.7 2 1 4 0 4.7-2 .7-2-.3-4-2.3-4" fill="#39b54a"/><path d="M1053 397.3c-2-.7-4 .3-4.7 2.2-.7 2 .3 4 2.2 4.7 2 .7 4-.3 4.7-2.2.6-2-.4-4-2.3-4.7" fill="#f7e34f"/><path d="M1053 387c-2-.7-4 .3-4.8 2.2-.6 2 .4 4 2.3 4.7 2 0 4-1 4.6-3 1-2 0-4-2-4.8" fill="#f9ae08"/><path d="M1053 376.8c-2-.6-4 .4-4.8 2.3-.7 2 .3 4 2.2 5 2 1 4 0 4.7-2 1-2 0-4-2-4.4" fill="#f47f45"/><path d="M1053 367.4c-2-.7-4 .3-4.8 2.2-.7 2 .3 4 2.2 4.7 2 .7 4-.3 4.7-2.2 1-2 0-4-2-4" fill="#ef4136"/></g><text x="182.32" y="115.122" style="line-height:82.99999833%;-inkscape-font-specification:Print Clearly" font-size="24" font-weight="300" letter-spacing="0" word-spacing="0" fill="#6d6e71" font-family="Print Clearly"><tspan x="180.92" y="115.122" style="text-align:end;line-height:82.99999833%;-inkscape-font-specification:'Print Clearly,'" font-size="22" font-weight="normal" letter-spacing="-1.5" text-anchor="end">Average of</tspan> <tspan x="180.92" y="133.322" style="text-align:end;line-height:82.99999833%;-inkscape-font-specification:'Print Clearly,'" font-size="22" font-weight="normal" letter-spacing="-1.5" text-anchor="end">Multiple Samples</tspan></text><text x="258.42" y="121.122" style="text-align:start;line-height:82.99999833%;-inkscape-font-specification:Print Clearly" font-size="24" font-weight="300" letter-spacing="0" word-spacing="0" fill="#6d6e71" font-family="Print Clearly"><tspan x="258.42" y="121.122" style="text-align:start;line-height:82.99999833%;-inkscape-font-specification:'Print Clearly,'" font-size="22" font-weight="normal" letter-spacing="-1.5">Individual</tspan> <tspan x="258.42" y="139.322" style="text-align:start;line-height:82.99999833%;-inkscape-font-specification:'Print Clearly,'" font-size="22" font-weight="normal" letter-spacing="-1.5">Sample Score</tspan></text><text x="223.72" y="55.322" style="text-align:start;line-height:82.99999833%;-inkscape-font-specification:Print Clearly" font-size="24" font-weight="300" letter-spacing="0" word-spacing="0" fill="#6d6e71" font-family="Print Clearly"><tspan x="223.72" y="55.322" style="text-align:start;line-height:82.99999833%;-inkscape-font-specification:'Print Clearly,'" font-size="22" font-weight="normal" letter-spacing="-1.5">Percentage of</tspan> <tspan x="223.72" y="73.622" style="text-align:start;line-height:82.99999833%;-inkscape-font-specification:'Print Clearly,'" font-size="22" font-weight="normal" letter-spacing="-1.5">Wet Weather Samples</tspan></text><text x="212.021" y="55.322" letter-spacing="0" font-weight="300" style="text-align:end;line-height:82.99999833%;-inkscape-font-specification:Print Clearly" word-spacing="0" font-size="24" text-anchor="end" fill="#6d6e71" font-family="Print Clearly"><tspan x="210.521" y="55.322" style="text-align:end;line-height:82.99999833%;-inkscape-font-specification:'Print Clearly,'" font-size="22" font-weight="normal" letter-spacing="-1.5">Percentage of</tspan> <tspan x="210.521" y="73.622" style="text-align:end;line-height:82.99999833%;-inkscape-font-specification:'Print Clearly,'" font-size="22" font-weight="normal" letter-spacing="-1.5">Dry Weather Samples</tspan></text></svg>
    </div>
    <div class="clearfix"></div>
	<h4 class='pull-left'>{{ beach.BeachName }}</h4>
	<div class='pull-right'>
		<small>Most Recent Sample: {{ latestSample.CharacteristicName }}</small>
		<span id="mostRecentSample"></span>
	</div>
	<div class="clearfix"></div>
	<hr />
    <div role="tabpanel">
  <!-- Nav tabs -->
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a href="#bacteria" aria-controls="home" role="tab" data-toggle="tab">Bacteria & Fecal Pollution</a></li>
    </ul>
    <!-- Tab panes -->
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="bacteria">
            <form class="form-inline padding-top-5 padding-bottom-10">
              <div class="form-group">
                <label for="vdaModal">View Data As: </label>
                <select class="form-control" id="vdaModal">
                  <option value="precip" selected>Precipitation Information</option>
                  <option value="spreadsheet">Interactive Spreadsheet</option>
                  <option value="timeline">Interactive Timeline</option>
                </select>
              </div>
              <div class="form-group pull-right">
                <label for="start_date">Select Data Between: </label>
                <select class="form-control" name="start_date_modal" id="start_date_modal"></select>
                <select class="form-control" name="end_date_modal" id="end_date_modal"></select>
              </div>
            </form>
            <div class="clearfix"></div>
            <div id="precip" class="show">
            	<h4>For the selected time period this site's samples failed:</h4>
            	<div class="container-fluid marginTopBottom20">
	              	<div class="col-md-6">
	            		<div id="ringSvgModal" class="pull-left"></div>
	            		<div id="ringTextModal" class='textPopup textDropPopup'></div>
	            	</div>
	            	<div class="col-md-6">
	            		<div id="dropSvgModal" class="dropMargin pull-left"></div>
	            		<div id="dropTextModal" class='textPopup textDropPopup'></div>
	            		<div class="clearfix"></div>
	            		<div id="sunSvgModal" class="pull-left"></div>
	            		<div id="sunTextModal" class='textPopup textSunPopup'></div>
	            	</div>          	
            	</div>
            </div>
            <div id="spreadsheet" class="hidden">
            	<div class="container-fluid marginTopBottom20">
	            	<div class="col-md-8">
	            		<table class="table table-bordered table-condensed sortable">
	            			<thead>
	            				<th data-defaultsort="desc">Date</th>
	            				<th>Type</th>
	            				<th>Score</th>
	            				<th>Rainfall</th>
	            			</thead>
	            			<tbody>
	            				{% for sample in samples %}
	            					<tr>
		            					<td data-dateformat="MM/DD/YYYY">{{ sample.StartDate|date:"m/d/Y" }}</td>
		            					<td>{{ sample.CharacteristicName }}</td>
		            					{% if sample.ResultValue >= 104 %}
		            						<td class="danger">{{ sample.ResultValue|floatformat }}</td>
		            					{% else %}
		            						<td class="success">{{ sample.ResultValue|floatformat }}</td>
		            					{% endif %}

		            					{% if sample.precipSum >= 0.5 %}
		            						<td class="info">{{ sample.precipSum|floatformat }}</td>
		            					{% else %}
		            						<td class="warning">{{ sample.precipSum|floatformat }}</td>
		            					{% endif %}
		            					
	            					</tr>
	            				{% endfor %}         				
	            			</tbody>
	            		</table>
	            	</div>          	
	            	<div class="col-xs-3">
	            			<p>Mean: </p>
	            			<p>Minimum: </p>
	            			<p>Maximum: </p>
	            			<p>Dry Samples: </p>
	            			<p>Wet Samples: </p>
	            			<p>Total Samples: </p>
	            	</div>
	            	<div class="col-xs-1">
	            		{% for sample in sampleAggregates %}
	            			<p>{{ sample.AvgValue|floatformat }}</p>
	            			<p>{{ sample.MinValue|floatformat }}</p>
	            			<p>{{ sample.MaxValue|floatformat }}</p>
	            		{% endfor %}
	            		{% for score in scores %}
	            			<p>{{ score.TotalDryWeatherSamplesSum|floatformat }}</p>
	            			<p>{{ score.TotalWetWeatherSamplesSum|floatformat }}</p>
	            			<p>{{ score.NumberOfSamplesSum|floatformat }}</p>
						{% endfor %}
	            	</div>
            	</div>            	
            </div>
            <div id="timeline" class="hidden">
            	Timeline
            </div>
            <div class="clearfix"></div>
            <hr />
            <small>
            	Our Partners at Sample Location United provided us with this data. Learn more about them at <a href="#">Data Sources</a>. This bacteria data is scored based on the US EPA criteria for safe primary contact (swimming). More information on <a href="#">Criteria & Scoring</a>. 
            </small>

        </div>
    </div>
</div>



</div>


<script type="text/javascript">
	$( document ).ready(function() {

		function drawIndicatorBar() {
			var value = parseInt({{ latestSample.ResultValue }});
			var valuePrint = value;
			// set any sample > 200 = to 200 for the linear scale 
			if (value > 200) {
				value = 200;
			}

			//create svg for most recent sample
			var scale = d3.scale.linear()
	            .domain([0, 200])
	            .range([0, 100]);

	        var firstPoint = scale(value) + 10;
	        var secondPoint = scale(value) + 20;
	        var thirdPoint = scale(value) + 15;

	        var points =  firstPoint + ",15 " + secondPoint + ",15 " + thirdPoint + ", 25";

			var mostRecentSample = d3.select("#mostRecentSample")
				.append('svg')
				.attr('width', 130)
				.attr('height', 26);

			mostRecentSample.append('rect')
				.attr('width', scale(200))
				.attr('height', 6)
				.attr('x', 15)
				.attr('y', 20)
				.attr('style', 'fill: #be1e2d');

			mostRecentSample.append('rect')
				.attr('width', scale(104))
				.attr('height', 6)
				.attr('x', 15)
				.attr('y', 20)
				.attr('style', 'fill: #009444');

			mostRecentSample.append('polygon')
				.attr('points', points)
				.attr('style', 'fill: #545454');

			mostRecentSample.append("text")
				.attr("text-anchor", "middle")
				.attr("dx", thirdPoint)
				.attr("dy", 13)
				.attr('style', "font-size: 14px;")
				.text(value);			
		}



		// create start and end date combo boxes
		function createStartEndCombos() {
			var start_date_options = '';
			var end_date_options = '';

			var start_date_selected = moment($( "#start_date option:selected" ).val());
			var end_date_selected = moment($( "#end_date option:selected" ).val());

			var minDate = moment(new Date(2004,0,1));
			var checkDate = moment().startOf('month');

			while (checkDate.isAfter(minDate)) {
				var value = checkDate.format('YYYY-MM-DD');
				var printValue = checkDate.format('MMM YYYY');
				var selected_start = '';
				var selected_end = '';
				if (checkDate.isSame(start_date_selected)) {
					var selected_start = 'selected';
				}
				if (checkDate.isSame(end_date_selected)) {
					var selected_end = 'selected';
				}

				start_date_options += '<option ' + selected_start + ' value="' + value + '">' + printValue + '</option>'; 

				end_date_options += '<option ' + selected_end + ' value="' + value + '">' + printValue + '</option>'; 

				checkDate.subtract(1, 'months');
			}

			$('#start_date_modal').html(start_date_options);
			$('#end_date_modal').html(end_date_options);			
		}



		// draw ring chart
		function drawRingChart() {
			{% for score in scores %}
				var TotalPassSamplesSum = {{ score.TotalPassSamplesSum }};
				var NumberOfSamplesSum = {{ score.NumberOfSamplesSum }};
			{% endfor %}

			var pctPass = ((TotalPassSamplesSum / NumberOfSamplesSum) * 100);
			var pctFail = 100 - pctPass;

			var pctPassFail = [{name: "fail", pct: pctFail},{name: "pass", pct: pctPass}];

			var w = 150;
			var h = 150;
			var innerRadius = 65;
			var outerRadius = 75;

			var arc = d3.svg.arc()
			    .outerRadius(outerRadius)
			    .innerRadius(innerRadius);

			var pie = d3.layout.pie()
				.sort(null)
				.value(function(d) { return d.pct; });

			var ringSvg = d3.select('#ringSvgModal').append('svg')
				.attr('width', w)
				.attr('height', h)
				.append('g')
				.attr("class", "rings")
				.attr("transform", "translate("+w/2+","+h/2+")")
				.selectAll(".arc")
				.data(function(d) { return pie(pctPassFail); });

			ringSvg.enter().append('text')
				.attr("text-anchor", "middle")
				.attr("transform", "translate(0,12)")
				.attr('style', function(d) { 
					if (d.data.name == "fail") {
						var pctNum = +d.data.pct;
						if (pctNum == 100) {
							var fontSize = 42;
						} else {
							var fontSize = 50;
						}				
						return "font-size: "+ fontSize +"; stroke: #be1e2d; }"
					} 
				})
				.text(function(d) { 
					if (d.data.name == "fail") {
						return d.data.pct.toFixed(0) + "%";
					}
				});


			var rings = ringSvg.enter()
				.append("path")
				.attr("class", "arc")
				.attr("d", arc)
				.style("fill", function(d) {
					if (d.data.name == "pass") {
						return "#009444";
					} else {
						return "#be1e2d";
					}
				});

			//add text next to ring chart
			$('#ringTextModal').text(pctFail.toFixed(0) + "% of the time in total.");

		}


		// draw raindrop chart
		function drawDropChart() {
			{% for score in scores %}
				var WetWeatherPassSamplesSum = {{ score.WetWeatherPassSamplesSum }};
				var TotalWetWeatherSamplesSum = {{ score.TotalWetWeatherSamplesSum }};
			{% endfor %}

			var pctWetFail = 100 - ((WetWeatherPassSamplesSum / TotalWetWeatherSamplesSum) * 100).toFixed(0);

			var dropSvg = '<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" width="53.771" height="59.867249" id="svg2" xml:space="preserve"><g transform="matrix(1.25,0,0,-1.25,0,59.86725)" id="g10"><g transform="translate(9.4551,8.6643)"id="g20"><path d="m 0,0 c 6.529,-6.529 17.116,-6.53 23.643,-0.002 6.528,6.528 6.527,17.114 -0.002,23.643 L 11.82,35.462 0,23.642 C -6.528,17.114 -6.528,6.528 0,0" id="path22" style="fill:#c1e5e6;fill-opacity:1;fill-rule:nonzero;stroke:none" /></g><g transform="translate(9.4551,8.6643)" id="g24"><path d="m 0,0 c 6.529,-6.529 17.116,-6.53 23.643,-0.002 6.528,6.528 6.527,17.114 -0.002,23.643 L 11.82,35.462 0,23.642 C -6.528,17.114 -6.528,6.528 0,0 z" id="path26" style="fill:none;stroke:#0a8ba7;stroke-width:3;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:10;stroke-opacity:1;stroke-dasharray:none" /></g></g>';

			// change translation if 100%, between 99 and 10 percent and less than 10 percent.
			if (pctWetFail == 100) {
				var fontSize = 16;
				var translateRight = 9;
			} else if (pctWetFail > 9.99) {
				var fontSize = 20;
				var translateRight = 10;		
			} else {
				var fontSize = 20;
				var translateRight = 15;				
			}

			var dropSvgText = '<g transform="translate('+ translateRight +',40)" id="g26"><text style="font-family:\'Print Clearly\'; font-size: '+ fontSize +'; stroke:#0a8ba7;">'+pctWetFail+'%</text></g>';

			var dropSvgClose = '</svg>';

			dropSvg = dropSvg + dropSvgText + dropSvgClose;

			$('#dropSvgModal').append(dropSvg);

			$('#dropTextModal').text(pctWetFail + "% of the time after wet weather.");

		}


		// draw sun chart
		function drawSunChart() {
			{% for score in scores %}
				var DryWeatherPassSamplesSum = {{ score.DryWeatherPassSamplesSum }};
				var TotalDryWeatherSamplesSum = {{ score.TotalDryWeatherSamplesSum }};
			{% endfor %}

				var pctDryFail = 100 - ((DryWeatherPassSamplesSum / TotalDryWeatherSamplesSum) * 100).toFixed(0);

			var sunSvg = '<svg width="78.911" height="78.212"><g transform="matrix(1.25 0 0 -1.25 0 78.21)"><path d="M46.63 30.497c0-8.034-6.512-14.546-14.545-14.546-8.034 0-14.546 6.513-14.546 14.547s6.51 14.546 14.545 14.546c8.033 0 14.546-6.512 14.546-14.546" fill="#ee4137"/><path d="M46.63 30.497c0-8.034-6.512-14.546-14.545-14.546-8.034 0-14.546 6.513-14.546 14.547s6.51 14.546 14.545 14.546c8.033 0 14.546-6.512 14.546-14.546z" fill="none" stroke="#f79420" stroke-width="3" stroke-miterlimit="10"/><path d="M52.164 30.497h6.84M46.283 44.695l4.836 4.836M32.085 50.576v6.84M17.886 44.695L13.05 49.53M17.886 16.298l-3.842-3.842M32.123 10.726v-6.84M46.283 16.298l4.836-4.836M4.207 30.497h6.84" fill="none" stroke="#faaf41" stroke-width="5" stroke-linecap="round" stroke-miterlimit="10"/></g>';

			// change translation if 100%, between 99 and 10 percent and less than 10 percent.
			if (pctDryFail == 100) {
				var fontSize = 14;
				var translateRight = 24;
			} else if (pctDryFail > 9.99) {
				var fontSize = 18;
				var translateRight = 25;		
			} else {
				var fontSize = 20;
				var translateRight = 28;				
			}


			var sunSvgText = '<g transform="translate('+ translateRight +',45)" id="g26"><text style="font-family:\'Print Clearly\'; font-size: '+ fontSize +'; stroke:#fff;">'+pctDryFail+'%</text></g>';

			var sunSvgClose = '</svg>';

			sunSvg = sunSvg + sunSvgText + sunSvgClose;

			$('#sunSvgModal').append(sunSvg);

			$('#sunTextModal').text(pctDryFail + "% of the time after dry weather.");



		}

		// run functions
		drawIndicatorBar();
		createStartEndCombos();
		drawRingChart();
		drawDropChart();
		drawSunChart();


		// on change listener for combo box
		$('#vdaModal').change(function() {
			// remove show class
			if ($('#precip').hasClass('show')) {
				$('#precip').removeClass('show').addClass('hidden');
			}
			if ($('#spreadsheet').hasClass('show')) {
				$('#spreadsheet').removeClass('show').addClass('hidden');
			}
			if ($('#timeline').hasClass('show')) {
				$('#timeline').removeClass('show').addClass('hidden');
			}

			var show = $( "#vdaModal option:selected" ).val();
			$('#'+show).removeClass('hidden').addClass('show');

		});

		// to ensure tables will sort
		$.bootstrapSortable();


	});


</script>
